<!DOCTYPE html>
<html lang="en">

    <title>Exercise 4 - Using map and filter to create dynamic table-rows</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="CSS.css">
    <script src="index.js"></script>
</head>

<body>
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <ul class="nav navbar-nav">
                <li>
                    <a id="len1" class="hoverable" href="index.html">Home</a>
                </li>
                <li>
                    <a id="len2" class="hoverable" href="Ex1-SimpleDOM.html">Link to exercise 1</a>
                </li>
                <li>
                    <a id="len3" class="hoverable" href="Ex2-EventBubbling.html">Link to exercise 2</a>
                </li>
                <li>
                    <a id="len4" class="hoverable" href="Ex3-MapToCreateLists.html">Link to exercise 3</a>
                </li>
                <li>
                    <a id="len5" class="hoverable" href="Ex4-MapAndFilterDynamicTables.html">Link to exercise 4</a>
                </li>
                <li>
                    <a id="len6" class="hoverable" href="Ex5-Calculator.html">Link to exercise 5</a>
                </li>
            </ul>
        </div>
    </nav>
    <div id="forTable"></div>
    <div id="priceDiv">Price:</div>
    <input type="number" id="inputPrice" name="inputField" value="" class="textField" />
    <input type="submit" value="Price less than" id="submitBtn" class="btn" />
    <script>
        let cars = [
            { id: 1, year: 1997, make: "Ford", model: "E350", price: 3000 },
            { id: 2, year: 1999, make: "Chevy", model: "Venture", price: 4900 },
            { id: 3, year: 2000, make: "Chevy", model: "Venture", price: 5000 },
            {
                id: 4,
                year: 1996,
                make: "Jeep",
                model: "Grand Cherokee",
                price: 4799,
            },
            { id: 5, year: 2005, make: "Volvo", model: "V70", price: 44799 },
        ];

        let html =
            '<table class="table"><thead><tr><th>id</th><th>year</th><th>make</th><th>model</th><th>price</th></tr></thead>';

        function makeTable(cars) {
            createTable = cars
                .map(function (car) {
                    return (
                        "<tr><td>" +
                        car.id +
                        "</td><td>" +
                        car.year +
                        "</td><td>" +
                        car.make +
                        "</td><td>" +
                        car.model +
                        "</td><td>" +
                        car.price +
                        "</td>"
                    );
                })
                .join(" ");
            return createTable;
        }
        document.getElementById("forTable").innerHTML = html + makeTable(cars);

        submitBtn = document.getElementById("submitBtn");
        inputPrice = document.getElementById("inputPrice");

        submitBtn.addEventListener("click", function (event) {
            event.preventDefault();
            let priceLessThan = inputPrice.value;
            //console.log(priceLessThan); //For testing purposes to see if we get the price
            document.getElementById("forTable").innerHTML =
                html +
                makeTable(
                    cars.filter(function (car) {
                        return car.price < priceLessThan;
                    })
                );
        });
    </script>
</body>

</html>